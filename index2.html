<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map with Circular Custom Markers</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        #map {
            height: 100vh; /* Full height for the map */
            width: 100%;   /* Full width for the map */
        }
    </style>
</head>
<body>
    <select id="time-dropdown">
        <option value="全部">全部</option>
        <option value="日間">日間</option>
        <option value="半夜">半夜</option>
        <option value="全日">全日</option>
    </select>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Initialize the map
        const map = L.map('map').setView([22.305451, 114.169656], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            opacity: 0.7
        }).addTo(map);

        // Sample feature data
        const features = [
            {
                properties: {
                    lng: 114.169656,
                    lat: 22.305451,
                    type: "type1",
                    name: "Point A",
                    time: "日間",
                    dangerous: "低",
                    legal: "是",
                    remarks: "備註 A"
                }
            },
            {
                properties: {
                    lng: 114.170000,
                    lat: 22.306000,
                    type: "type2",
                    name: "Point B",
                    time: "半夜",
                    dangerous: "高",
                    legal: "否",
                    remarks: "備註 B"
                }
            }
        ];

        const markers = []; // Store markers and their features

        // Function to create a circular custom marker icon
        function createCustomIcon() {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            const size = 40; // Size of the marker
            canvas.width = size;
            canvas.height = size;

            // Draw the red circle
            context.fillStyle = 'red'; // Set the fill color to red
            context.beginPath();
            context.arc(size /
